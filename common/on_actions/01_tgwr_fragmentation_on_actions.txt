on_actions = {
	on_startup = {
		effect = {
            if = {
				limit = {
					has_game_rule = {
						rule = ita_fragmentation_status
						option = ITA_FRAGMENTED
					}
				}
				2 = { add_core_of = PAP }
				835 = { add_core_of = PAP }
				161 = { add_core_of = PAP }
				833 = { add_core_of = EMI }
				158 = { add_core_of = SRD }
				834 = { add_core_of = SRD }
				735 = { add_core_of = SRD }
				159 = { add_core_of = VNC }
				160 = { add_core_of = VNC }
				ITA = {
					release = SIC
					release = TUS
					release = VNC
					release = PAP
					release = EMI
					release = ERI
					release = SOM
					release = LBA
				}	
				SRD = {
				    set_politics = {
				   		ruling_party = neutrality
				   		elections_allowed = no
				    }
					add_popularity = {
    					ideology = neutrality
    					popularity = 0.15
					}
					set_cosmetic_tag = SRD_PIE
					add_ideas = ITA_ww1_Risorgimento
					annex_country = {
						target = ITA
						transfer_troops = yes
					}
					set_capital = 158
					delete_units = {
				        division_template = "Divisione Coloniale"
				        disband = no
				    }
					transfer_units_fraction= {
						target = SIC
						size = 0.35
				    }
					transfer_units_fraction= {
						target = TUS
						size = 0.13
				    }
					transfer_units_fraction= {
						target = SRD
						size = 0.15
				    }
					transfer_units_fraction= {
						target = EMI
						size = 0.05
				    }
					transfer_units_fraction= {
						target = VNC
						size = 0.2
				    }
					transfer_units_fraction= {
						target = PAP
						size = 0.28
				    }
					change_tag_from = ITA
					every_state = {
						teleport_armies = {
							to_state_array = owned_controlled_states
						}
					}
				}
				AUH = {
				    puppet = VNC 
					give_guarantee = PAP
				}
				VNC = {
				    set_cosmetic_tag = VNC_AUH	
				}	
				every_state = {
					limit = {
						OR = {
						    is_core_of = ITA
						    is_claimed_by = ITA
						}
					}
               	 	remove_core_of = ITA
					remove_claim_by = ITA
            	}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = ita_fragmentation_status
						option = ITA_KR
					}
				}
				2 = { add_core_of = PAP }
				ITA = {
					release = SIC
					release = PAP
					release = SRD
					release = SOM
					release = LBA
					set_capital = 159
					delete_units = {
				        division_template = "Divisione Coloniale"
				        disband = no
				    }
				    set_country_flag = ITA_republican_italy_flag
				    set_cosmetic_tag = ROI
					set_popularities = {
				        democratic = 56
				        neutrality = 25
				        fascism = 9
				        communism = 10
			    	}
					create_country_leader = {
						name = "Giovanni Giolitti"
						picture = "gfx/leaders/ITA/ITA_giovanni_giolitti.dds"
						expire="1935.1.1" 
						ideology = social_liberalism
						traits = { two_faced trait_social_liberalism }
	   			    }
					set_party_name = {
						ideology = democratic
						long_name = ITA_democratic_left_party
						name = ITA_democratic_left_party
					}
			        set_party_name = {
				        ideology = neutrality
				        long_name = ITA_neutrality_monarchist_party_long
				        name = ITA_neutrality_monarchist_party
			        }
					retire_ideology_leader = neutrality
					remove_ideas = {
   						ITA_ww1_Risorgimento
    					idea_italy_triple_alliance
						victor_emmanuel_ww1
					}
					load_focus_tree = generic_focus
			    }
				SRD = {
				    set_politics = {
				   		ruling_party = neutrality
				   		elections_allowed = no
				    }
					add_popularity = {
    					ideology = neutrality
    					popularity = 0.15
					}
				}
				SIC = {
					give_guarantee = PAP
					give_military_access = PAP
				}	
				PAP = {
					give_guarantee = SIC
					give_military_access = SIC
				}	
				create_dynamic_country = {
					original_tag = ITA
					set_capital = 159
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
					set_popularities = {
						democratic = 17
						neutrality = 0
						fascism = 4
						communism = 79
					}
					set_country_flag = ITA_socialist_italy_flag
					set_cosmetic_tag = ITA_socialism
					create_country_leader = { 
						name = "Filippo Turati"
						picture = "gfx/leaders/ITA/ITA_filippo_turati.dds" 
						expire="1935.1.1" 
						ideology = reformist_socialism 
						traits = { trait_reformist_socialism } 
					}
					set_party_name = {
						ideology = democratic
						long_name = ITA_democratic_reformist_party_long
						name = ITA_democratic_reformist_party
					}		
					create_corps_commander = {
						name = "Randolfo Pacciardi"
						portrait_path = "gfx/leaders/ITA/ITA_randolfo_pacciardi.dds"
						traits = {
							politically_connected
							trickster
							guerilla_fighter
						}
						skill = 3
						attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 3
					}
					create_corps_commander = {
						name = "Edmondo Rossoni"
						portrait_path = "gfx/leaders/ITA/ITA_edmondo_rossoni.dds"
						traits = {
							career_officer
							organizer
						}
						skill = 2
						attack_skill = 2
						defense_skill = 1
						planning_skill = 1
						logistics_skill = 3
					}
					create_corps_commander = {
						name = "Arnaldo Azzi" 
						portrait_path = "gfx/leaders/ITA/ITA_arnaldo_azzi.dds" 
						traits = {}
						skill = 1
						attack_skill = 1
						defense_skill = 1
						planning_skill = 1
						logistics_skill = 1
					}
                	reserve_dynamic_country = yes
                	load_focus_tree = generic_focus					
				}
				every_state = {
					limit = {
						OR = {
							state = 158
							state = 161
							state = 162
							state = 833
							state = 39
							state = 834
							state = 735
							state = 835
						}
						is_owned_by = ROI
						is_controlled_by = ROI
					}
					SRI = {
						transfer_state = PREV
						add_state_core = PREV
					}
				}
				every_state = {
					limit = {
						OR = {
							is_claimed_by = ITA
							is_core_of = SRD
							is_core_of = SIC
							is_core_of = PAP
						}
					}
					ITA = {
						add_state_claim = PREV
					}
					SRI = {
						add_state_claim = PREV
					}
				}
				ETH = {
				    transfer_state = 550	
				}
				ROI = {
				    transfer_units_fraction= {
						target = SRI
						size = 0.35
						keep_unit_leaders_trigger = {
					        always = yes
					    }
				    }
					transfer_units_fraction= {
						target = SIC
						size = 0.36
				    }
					transfer_units_fraction= {
						target = SRD
						size = 0.2
				    }
					transfer_units_fraction= {
						target = PAP
						size = 0.07
				    }
				    every_state = {
						teleport_armies = {
							to_state_array = owned_controlled_states
						}
					}					
				}	
				FRA = { add_to_faction = SRD }
			}
			if = {
				limit = {
					has_game_rule = {
						rule = rule_russian_flag
						option = AHISTORICAL_RUSSIAN_FLAG
					}
				}
				RUS = { set_cosmetic_tag = RUS_ahistorical_flag } 
			}		
            if = {
				limit = {
					has_game_rule = {
						rule = rule_russian_flag
						option = IMPERIAL_RUSSIAN_FLAG
					}
				}
				RUS = { set_cosmetic_tag = RUS_absolutism } 
			}
		}
	}
}	